<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='ydpgwtutil'>
	<inherits name='com.google.gwt.user.User' />
    <inherits name="com.google.gwt.logging.Logging"/>
    <inherits name="javax.annotation.Annotation"/>
	<inherits name="com.google.common.collect.Collect"/>
	
	<source path='client' />

	<define-property name="mobile.user.agent" values="android23" />
	<extend-property name="mobile.user.agent" values="android3" />
	<extend-property name="mobile.user.agent" values="android321" />
	<extend-property name="mobile.user.agent" values="android4" />
	<extend-property name="mobile.user.agent" values="firefox" />
	<extend-property name="mobile.user.agent" values="chrome" />
	<extend-property name="mobile.user.agent" values="safari" />
	<extend-property name="mobile.user.agent" values="unknown" />
	<extend-property name="mobile.user.agent" values="air" />

	<property-provider name="mobile.user.agent" generator="eu.ydp.gwtutil.user.rebind.MobileUserAgentPropertyGenerator" />

	<collapse-property name="mobile.user.agent" values="*" />
	
	<script src="swfobject/swfobject.js" />

	<!-- Debug -->
	<define-property name="application.debug" values="off" />
	<extend-property name="application.debug" values="on" />
	<set-property name="application.debug" value="off" />

	<replace-with class="eu.ydp.gwtutil.client.debug.logger.LoggerEmpty">
		<when-type-is class="eu.ydp.gwtutil.client.debug.logger.Logger" />
	</replace-with>

	<replace-with class="eu.ydp.gwtutil.client.debug.logger.LoggerDesktop">
		<when-type-is class="eu.ydp.gwtutil.client.debug.logger.Logger" />
		<when-property-is name="application.debug" value="on" />
	</replace-with>

	<replace-with class="eu.ydp.gwtutil.client.debug.logger.LoggerMobile">
		<when-type-is class="eu.ydp.gwtutil.client.debug.logger.Logger" />
		<when-property-is name="application.debug" value="on" />
		<any>
			<when-property-is name="mobile.user.agent" value="android23" />
			<when-property-is name="mobile.user.agent" value="android3" />
			<when-property-is name="mobile.user.agent" value="android321" />
			<when-property-is name="mobile.user.agent" value="android4" />
			<when-property-is name="mobile.user.agent" value="firefox" />
			<when-property-is name="mobile.user.agent" value="chrome" />
		</any>
	</replace-with>
	
  <set-property name="gwt.logging.enabled" value="TRUE"/>
  <set-property name="gwt.logging.popupHandler" value="DISABLED" />    
  <set-property name="gwt.logging.consoleHandler" value="DISABLED" />
  <set-property name="gwt.logging.developmentModeHandler" value="DISABLED" />  
  <set-property name="gwt.logging.systemHandler" value="DISABLED" />
  
  <collapse-property name="gwt.logging.systemHandler" values="*" />
  <collapse-property name="gwt.logging.developmentModeHandler" values="*" />
  <collapse-property name="gwt.logging.consoleHandler" values="*" />
  <collapse-property name="gwt.logging.popupHandler" values="*" />
  <collapse-property name="gwt.logging.enabled" values="*" />
  
  <define-property name="debugMode" values="none,popup,console,both" />
  <property-provider name="debugMode"><![CDATA[
       {
		if (typeof window.getDebugMode == 'function')
			return window.getDebugMode();
		return "console";
       }
     ]]>
  </property-provider>
  <collapse-property name="debugMode" values="*" />
  
  <set-property name="gwt.logging.enabled" value="FALSE">
  	<when-property-is name="debugMode" value="none"/>
  </set-property>
  
  <set-property name="gwt.logging.popupHandler" value="ENABLED">
  	<any>
  		<when-property-is name="debugMode" value="popup"/>
  		<when-property-is name="debugMode" value="both"/>
  	</any>  	
  </set-property>
  <set-property name="gwt.logging.consoleHandler" value="ENABLED">
  	<any>
  		<when-property-is name="debugMode" value="console"/>
  		<when-property-is name="debugMode" value="both"/>
  	</any>  	
  </set-property>
    
  <generate-with class="eu.ydp.gwtutil.user.rebind.constants.StringConstantsGenerator">
	<when-type-assignable class="eu.ydp.gwtutil.client.constants.StringConstants" />
  </generate-with>
  
  <replace-with class="eu.ydp.gwtutil.client.xml.proxy.XMLProxyStandard">
    <when-type-is class="eu.ydp.gwtutil.client.xml.proxy.XMLProxy"/>
  </replace-with>
  
  <replace-with class="eu.ydp.gwtutil.client.xml.proxy.XMLProxyIE6">
    <when-type-is class="eu.ydp.gwtutil.client.xml.proxy.XMLProxy"/>
    <any>
      <when-property-is name="user.agent" value="ie6"/>
      <when-property-is name="user.agent" value="ie8"/>
      <when-property-is name="user.agent" value="ie9"/>
    </any>
  </replace-with>
  
  <define-linker name="xsiframescripts" class="eu.ydp.gwtutil.core.linker.CrossSiteIframeWithScriptsLinker" />
	
</module>
